<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HKICO Python | Luy·ªán thi - Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root{ --glass-bg: rgba(255,255,255,.65); --glass-brd: rgba(0,0,0,.08); --glass-shadow: 0 10px 30px rgba(0,0,0,.12); --blur: 16px; --radius: 22px; --primary:#4e73df; --accent:#1cc88a; --ok:#2ecc71; --warn:#f6c23e; --bad:#e74a3b; }
    body{ min-height:100vh; background:linear-gradient(135deg,#f0f8ff 0%,#e6f7ff 40%,#ffffff 100%) fixed; color:#2d3436; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; }
    .glass{ background:var(--glass-bg); border:1px solid var(--glass-brd); backdrop-filter:blur(var(--blur)); border-radius:var(--radius); box-shadow:var(--glass-shadow); }
    .nav-glass{ background:rgba(255,255,255,.85); border-bottom:1px solid rgba(0,0,0,.08); backdrop-filter:blur(12px); }
    .brand-gradient{ background:linear-gradient(90deg,var(--primary),var(--accent)); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:800; }
    .nav-glass .nav-link{ color:#1f2937!important; font-weight:500; }
    .nav-glass .nav-link:hover{ color:var(--primary)!important; }
    .table thead th{ color:#2c3e50; border-color: rgba(0,0,0,.08); }
    .table tbody td{ border-color: rgba(0,0,0,.06); }
    .fixed-table{ table-layout:fixed; width:100%; }
    .fixed-table colgroup col.c1{ width:7%; }
    .fixed-table colgroup col.c2{ width:12%; }
    .fixed-table colgroup col.c3{ width:11%; }
    .fixed-table colgroup col.c4{ width:22%; }
    .fixed-table colgroup col.c5{ width:8%; }
    .fixed-table colgroup col.c6{ width:32%; }
    .fixed-table colgroup col.c7{ width:8%; }
    .fixed-table th, .fixed-table td{ vertical-align: top; }
    .wrap-normal{ white-space:normal; word-break:break-word; overflow-wrap:anywhere; }
    .status-dot{ width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:.4rem; }
    .dot-ok{ background:var(--ok); }.dot-warn{ background:var(--warn); }.dot-bad{ background:var(--bad); }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light nav-glass sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold brand-gradient" href="#home">HKICO ‚Ä¢ Python</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="#home"><i class="bi bi-house"></i> Trang ch·ªß</a></li>
          <li class="nav-item"><a class="nav-link" href="#charts"><i class="bi bi-bar-chart"></i> Bi·ªÉu ƒë·ªì</a></li>
          <li class="nav-item"><a class="nav-link" href="#details"><i class="bi bi-journal-text"></i> K·∫øt qu·∫£ chi ti·∫øt</a></li>
          <li class="nav-item"><a class="nav-link" href="#alerts"><i class="bi bi-exclamation-triangle"></i> C·∫£nh b√°o</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container-fluid my-4">
    <!-- HOME -->
    <section id="view-home" class="d-none">
      <div class="row g-3">
        <div class="col-12 col-lg-8">
          <div class="card glass p-3">
            <div class="d-flex align-items-center justify-content-between">
              <h5 class="card-title mb-0">Th√¥ng tin l·ªõp</h5>
              <span id="class-code" class="badge bg-primary rounded-pill"></span>
            </div>
            <hr class="opacity-25" />
            <div class="row g-3">
              <div class="col-12 col-md-6">
                <div class="glass p-3">
                  <div class="mb-2"><i class="bi bi-clock me-2"></i><strong>Khung gi·ªù:</strong> <span id="class-schedule"></span></div>
                  <div class="mb-2"><i class="bi bi-person-workspace me-2"></i><strong>Gi√°o vi√™n:</strong> <span id="class-teacher"></span></div>
                  <div class="mb-2"><i class="bi bi-link-45deg me-2"></i><strong>Link h·ªçc:</strong> <a id="class-link" target="_blank" rel="noopener">M·ªü ph√≤ng h·ªçc</a></div>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <div class="glass p-3">
                  <div class="mb-2"><i class="bi bi-collection me-2"></i><strong>S·ªë h·ªçc ph·∫ßn:</strong> <span id="class-modules-count"></span></div>
                  <div class="mb-2"><i class="bi bi-calendar2-week me-2"></i><strong>T·ªïng bu·ªïi / h·ªçc ph·∫ßn:</strong> <span>12</span></div>
                  <div class="mb-2"><i class="bi bi-people me-2"></i><strong>Sƒ© s·ªë:</strong> <span id="class-students-count"></span></div>
                </div>
              </div>
            </div>
            <div class="mt-3">
              <h6 class="mb-2">Danh s√°ch h·ªçc sinh</h6>
              <div id="student-chips" class="d-flex flex-wrap gap-2"></div>
              <small class="text-muted">B·∫•m t√™n h·ªçc sinh ƒë·ªÉ m·ªü tab Chi ti·∫øt.</small>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-4">
          <div class="card glass p-3 h-100">
            <h5 class="card-title">T·ªïng quan nhanh</h5>
            <hr class="opacity-25" />
            <div class="mb-2"><span class="status-dot dot-ok"></span> ƒêi·ªÉm trung b√¨nh ‚â• 8.0</div>
            <div class="mb-2"><span class="status-dot dot-warn"></span> 6.0 ‚Äì 7.9</div>
            <div class="mb-2"><span class="status-dot dot-bad"></span> &lt; 6.0 ho·∫∑c chuy√™n c·∫ßn th·∫•p</div>
            <div class="mt-3">
              <div class="d-flex justify-content-between"><small>Ti·∫øn ƒë·ªô ho√†n th√†nh h·ªçc ph·∫ßn</small><small id="progress-percent">0%</small></div>
              <div class="progress mt-1" role="progressbar" aria-label="Ti·∫øn ƒë·ªô">
                <div id="progress-bar" class="progress-bar" style="width:0%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CHARTS (class only) -->
    <section id="view-charts" class="d-none">
      <div class="card glass p-3 mb-3">
        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
          <h5 class="card-title mb-0">Bi·ªÉu ƒë·ªì k·∫øt qu·∫£ (to√†n l·ªõp)</h5>
          <div class="d-flex gap-2">
            <select id="charts-select-module" class="form-select form-select-sm w-auto"></select>
          </div>
        </div>
      </div>
      <div class="row g-3">
        <div class="col-12 col-xl-6">
          <div class="card glass p-3 h-100">
            <h6 class="mb-2"><i class="bi bi-graph-up"></i> ƒêi·ªÉm trung b√¨nh theo h·ªçc ph·∫ßn</h6>
            <canvas id="chartModuleAvg" height="140"></canvas>
          </div>
        </div>
        <div class="col-12 col-xl-6">
          <div class="card glass p-3 h-100">
            <h6 class="mb-2"><i class="bi bi-activity"></i> TB theo bu·ªïi c·ªßa h·ªçc ph·∫ßn ƒë√£ ch·ªçn</h6>
            <canvas id="chartClassTrendBySession" height="140"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- DETAILS -->
    <section id="view-details" class="d-none">
      <div class="card glass p-3 mb-3">
        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
          <h5 class="card-title mb-0">K·∫øt qu·∫£ chi ti·∫øt theo bu·ªïi</h5>
          <div class="d-flex gap-2">
            <select id="select-module-table" class="form-select form-select-sm w-auto"></select>
            <select id="select-student-table" class="form-select form-select-sm w-auto"></select>
          </div>
        </div>
      </div>
      <div id="details-summary" class="card glass p-3 mb-3"></div>
      <div class="card glass p-3 mb-3">
        <div class="row g-3">
          <div class="col-12 col-xl-6">
            <h6 class="mb-2"><i class="bi bi-graph-up-arrow"></i> TB theo bu·ªïi (to√†n l·ªõp)</h6>
            <canvas id="chartDetailsClassTrend" height="140"></canvas>
          </div>
          <div class="col-12 col-xl-6">
            <h6 class="mb-2"><i class="bi bi-person-lines-fill"></i> H·ªçc sinh vs TB l·ªõp (theo bu·ªïi)</h6>
            <canvas id="chartDetailsStudentVsClass" height="140"></canvas>
          </div>
        </div>
      </div>
      <div class="card glass p-0 overflow-hidden">
        <div class="table-responsive">
          <table class="table align-middle mb-0 fixed-table">
            <colgroup>
              <col class="c1" />
              <col class="c2" />
              <col class="c3" />
              <col class="c4" />
              <col class="c5" />
              <col class="c6" />
              <col class="c7" />
            </colgroup>
            <thead>
              <tr>
                <th>Bu·ªïi</th>
                <th>Ng√†y</th>
                <th>ƒêi·ªÉm danh</th>
                <th>N·ªôi dung h·ªçc</th>
                <th>ƒêi·ªÉm</th>
                <th>Nh·∫≠n x√©t</th>
                <th>T·ªáp (PDF)</th>
              </tr>
            </thead>
            <tbody id="details-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ALERTS -->
    <section id="view-alerts" class="d-none">
      <div class="card glass p-3 mb-3">
        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
          <h5 class="card-title mb-0">C·∫£nh b√°o h·ªçc sinh c·∫ßn c·∫£i thi·ªán</h5>
          <div class="d-flex gap-2">
            <label class="form-label me-2 mb-0">Ng∆∞·ª°ng ƒëi·ªÉm TB</label>
            <input id="threshold-score" type="number" step="0.1" value="6.0" class="form-control form-control-sm w-auto" />
            <label class="form-label ms-3 me-2 mb-0">Ng∆∞·ª°ng chuy√™n c·∫ßn (%)</label>
            <input id="threshold-att" type="number" value="75" class="form-control form-control-sm w-auto" />
            <button id="btn-recalc" class="btn btn-sm btn-primary"><i class="bi bi-arrow-repeat"></i> T√≠nh l·∫°i</button>
          </div>
        </div>
      </div>
      <div id="alerts-list" class="row g-3"></div>
    </section>
  </main>

  <footer class="container-fluid mb-4">
    <div class="text-center text-secondary small">¬© HKICO Python ‚Ä¢ Dashboard minh ho·∫° ‚Ä¢ Glass UI</div>
  </footer>

  <script>
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    function showView(view){ ["home","charts","details","alerts"].forEach(v=>{ const sec = document.getElementById('view-'+v); if(!sec) return; v===view? sec.classList.remove('d-none'): sec.classList.add('d-none'); }); }
    function safeAvg(arr){ return arr?.length ? +(arr.reduce((a,b)=>a+b,0)/arr.length).toFixed(2) : 0; }

    const state = { data: null, selectedStudent:null, selectedModule:null, charts:{ moduleAvg:null, classTrend:null, detailsClassTrend:null, detailsStudentVsClass:null } };

    // HOME
    function renderHome(){
      const { cls, students, modules } = state.data;
      $('#class-code').textContent = cls.code; $('#class-schedule').textContent = cls.schedule; $('#class-teacher').textContent = cls.teacher; $('#class-link').href = cls.link;
      $('#class-modules-count').textContent = modules.length; $('#class-students-count').textContent = students.length;
      $('#student-chips').innerHTML = students.map(s=>`<button type="button" class="btn btn-sm btn-outline-primary rounded-pill student-chip" data-sid="${s.id}"><i class='bi bi-person'></i> ${s.name}</button>`).join('');
      $$('.student-chip').forEach(b=> b.addEventListener('click', ()=>{ state.selectedStudent = b.dataset.sid; location.hash = 'details'; }));
      const totalSessions = modules.length*12; let completed=0; const now=new Date(); modules.forEach(m=>m.sessions.forEach(ss=>{ if(new Date(ss.date)<=now) completed++; }));
      const percent = Math.min(100, Math.round(100*completed/totalSessions)); $('#progress-percent').textContent = percent+'%'; $('#progress-bar').style.width = percent+'%';
    }

    // CHARTS (class-only)
    function buildCharts(){
      const { modules, students } = state.data;
      // Bar: class average per module
      const labels = modules.map(m=>m.name);
      const moduleAverages = modules.map(m=>{ const perStudentAvg = students.map(s=>{ const scores = m.sessions.map(ss=> ss.scores?.[s.id]).filter(v=>typeof v==='number'); return safeAvg(scores); }); return safeAvg(perStudentAvg); });
      const ctx1 = document.getElementById('chartModuleAvg'); state.charts.moduleAvg?.destroy?.();
      state.charts.moduleAvg = new Chart(ctx1, { type:'bar', data:{ labels, datasets:[{ label:'ƒêi·ªÉm TB (l·ªõp)', data: moduleAverages }] }, options:{ plugins:{ legend:{position:'top'}, tooltip:{ callbacks:{ label:(c)=>` ${c.dataset.label}: ${c.parsed.y} ƒëi·ªÉm` } } }, scales:{ y:{ min:0, max:10 } } } });

      // Line: class average by session for selected module
      const sel = document.getElementById('charts-select-module'); sel.innerHTML = modules.map((m,i)=>`<option value="${m.id}" ${i===0?'selected':''}>${m.name}</option>`).join('');
      function renderClassTrend(){ const mid = sel.value; const mod = modules.find(m=>m.id===mid); const labels = mod.sessions.map((ss,idx)=>`Bu·ªïi ${idx+1}`); const classBySession = mod.sessions.map(ss=>{ const vals = students.map(s=> ss.scores?.[s.id]).filter(v=>typeof v==='number'); return safeAvg(vals); }); const ctx2 = document.getElementById('chartClassTrendBySession'); state.charts.classTrend?.destroy?.(); state.charts.classTrend = new Chart(ctx2, { type:'line', data:{ labels, datasets:[{ label:'TB l·ªõp theo bu·ªïi', data: classBySession, borderWidth:2, tension:.3, pointRadius:3 }] }, options:{ plugins:{ legend:{position:'top'}, tooltip:{ callbacks:{ label:(c)=>` ${c.dataset.label}: ${c.parsed.y} ƒëi·ªÉm` } } }, scales:{ y:{ min:0, max:10 } } } }); }
      sel.onchange = renderClassTrend; renderClassTrend();
    }

    // DETAILS
    function renderDetails(){
      const { modules, students } = state.data;
      const selMod = document.getElementById('select-module-table'); const selStd = document.getElementById('select-student-table');
      selMod.innerHTML = modules.map((m,i)=>`<option value="${m.id}" ${i===0?'selected':''}>${m.name}</option>`).join('');
      selStd.innerHTML = students.map((s,i)=>`<option value="${s.id}" ${i===0?'selected':''}>${s.name}</option>`).join('');
      if(state.selectedStudent && students.some(s=>s.id===state.selectedStudent)) selStd.value = state.selectedStudent;
      if(state.selectedModule && modules.some(m=>m.id===state.selectedModule)) selMod.value = state.selectedModule;

      function renderSummary(){ const sid = selStd.value; const mid = selMod.value; const stu = students.find(s=>s.id===sid); const mod = modules.find(m=>m.id===mid); const scores = mod.sessions.map(ss=>ss.scores?.[sid]).filter(v=>typeof v==='number'); const avg = safeAvg(scores); const total = mod.sessions.length; const present = mod.sessions.reduce((acc,ss)=> acc + (ss.attendance?.[sid]?1:0),0); const attRate = total? Math.round(present*100/total):0; const dates = mod.sessions.map(ss=>new Date(ss.date)).sort((a,b)=>a-b); const dateRange = dates.length? `${dates[0].toLocaleDateString('vi-VN')} ‚Äì ${dates[dates.length-1].toLocaleDateString('vi-VN')}`:''; $('#details-summary').innerHTML = `<div class="d-flex flex-column flex-lg-row justify-content-between gap-3"><div><div class="fw-semibold mb-1"><i class="bi bi-person-badge"></i> H·ªçc sinh</div><div class="fs-5 fw-bold">${stu?.name ?? sid}</div><div class="text-muted small">M√£: ${sid}</div></div><div><div class="fw-semibold mb-1"><i class="bi bi-journal"></i> H·ªçc ph·∫ßn</div><div class="fs-6 fw-bold">${mod?.name ?? mid}</div><div class="text-muted small">S·ªë bu·ªïi: ${total} ‚Ä¢ Th·ªùi gian: ${dateRange}</div></div><div class="d-flex gap-4"><div><div class="text-muted small">ƒêi·ªÉm TB</div><div class="fs-4 fw-bold">${avg}</div></div><div><div class="text-muted small">Chuy√™n c·∫ßn</div><div class="fs-4 fw-bold">${attRate}%</div></div></div></div>`; }

      function renderDetailCharts(){ const sid = selStd.value; const mid = selMod.value; const mod = modules.find(m=>m.id===mid); const labels = mod.sessions.map((ss,idx)=>`Bu·ªïi ${idx+1}`); const classBySession = mod.sessions.map(ss=>{ const vals=students.map(s=> ss.scores?.[s.id]).filter(v=>typeof v==='number'); return safeAvg(vals); }); const studentBySession = mod.sessions.map(ss => (typeof ss.scores?.[sid] === 'number' ? ss.scores[sid] : null)); const ctxA = document.getElementById('chartDetailsClassTrend'); const ctxB = document.getElementById('chartDetailsStudentVsClass'); state.charts.detailsClassTrend?.destroy?.(); state.charts.detailsStudentVsClass?.destroy?.(); state.charts.detailsClassTrend = new Chart(ctxA, { type:'line', data:{ labels, datasets:[{ label:'TB l·ªõp theo bu·ªïi', data: classBySession, borderWidth:2, tension:.3, pointRadius:3 }] }, options:{ plugins:{ legend:{position:'top'}, tooltip:{ callbacks:{ label:(c)=>` ${c.dataset.label}: ${c.parsed.y} ƒëi·ªÉm` } } }, scales:{ y:{ min:0, max:10 } } } }); const studentName = selStd.options[selStd.selectedIndex].text; state.charts.detailsStudentVsClass = new Chart(ctxB, { type:'line', data:{ labels, datasets:[ { label:`${studentName} (ƒëi·ªÉm)`, data: studentBySession, borderWidth:2, tension:.35, pointRadius:3 }, { label:'TB l·ªõp', data: classBySession, borderWidth:2, tension:.3, pointRadius:3, borderDash:[6,4] } ] }, options:{ plugins:{ legend:{position:'top'}, tooltip:{ callbacks:{ title:(items)=> items.length? `Bu·ªïi ${items[0].dataIndex+1}`:'', label:(c)=>` ${c.dataset.label}: ${c.parsed.y} ƒëi·ªÉm` } } }, scales:{ y:{ min:0, max:10 } } } }); }

      function fillTable(){ const m = modules.find(x=>x.id===selMod.value); const sid = selStd.value; const tbody = document.getElementById('details-body'); tbody.innerHTML = m.sessions.map((ss, idx)=>{ const present = !!(ss.attendance?.[sid]); const score = (typeof ss.scores?.[sid] === 'number') ? ss.scores[sid] : '-'; const remark = ss.remarks?.[sid] ?? ''; const topic = ss.topic ?? ''; const date = new Date(ss.date); let files = []; if (Array.isArray(ss.attachments)) { files = ss.attachments.filter(f => !f.studentId || f.studentId === sid); } else if (ss.attachments && typeof ss.attachments === 'object') { const list = ss.attachments[sid]; if (Array.isArray(list)) files = list; } const attachmentsHtml = files.length ? files.map((f)=>`<a href="${encodeURI(f.url)}" class="btn btn-sm btn-outline-primary me-1 mb-1" target="_blank" rel="noopener" title="${f.name}"><i class='bi bi-file-earmark-pdf'></i> ${f.name}</a>`).join('') : '<span class="text-muted">-</span>'; return `<tr><td>Bu·ªïi ${idx+1}</td><td>${date.toLocaleDateString('vi-VN')}</td><td>${present ? '<span class="badge text-bg-success">C√≥ m·∫∑t</span>' : '<span class="badge text-bg-secondary">V·∫Øng</span>'}</td><td>${topic}</td><td>${score}</td><td class="wrap-normal">${remark}</td><td>${attachmentsHtml}</td></tr>`; }).join(''); }

      selMod.onchange = ()=>{ renderSummary(); renderDetailCharts(); fillTable(); };
      selStd.onchange = ()=>{ renderSummary(); renderDetailCharts(); fillTable(); };
      renderSummary(); renderDetailCharts(); fillTable();
    }

    function renderAlerts(){ const { modules, students } = state.data; const thrScore = parseFloat($('#threshold-score').value || '6'); const thrAtt = parseFloat($('#threshold-att').value || '75'); const alerts = students.map(s=>{ let present=0,total=0; const scores=[]; modules.forEach(m=> m.sessions.forEach(ss=>{ total++; if(ss.attendance?.[s.id]) present++; const sc = ss.scores?.[s.id]; if(typeof sc==='number') scores.push(sc); })); const attRate = +(100*present/total).toFixed(1); const avg = safeAvg(scores); return { s, attRate, avg, needs:(avg<thrScore)||(attRate<thrAtt) }; }).filter(x=>x.needs).sort((a,b)=> (a.avg-b.avg) || (a.attRate-b.attRate)); const container = $('#alerts-list'); container.innerHTML = alerts.length ? alerts.map(x=>{ const statusClass = x.avg<6 || x.attRate<60 ? 'dot-bad' : 'dot-warn'; return `<div class="col-12 col-md-6 col-lg-4"><div class="card glass p-3 h-100"><div class="d-flex align-items-center justify-content-between"><h6 class="mb-1">${x.s.name}</h6><span class="status-dot ${statusClass}"></span></div><div class="small text-muted">M√£: ${x.s.id}</div><hr class="opacity-25" /><div class="d-flex justify-content-between"><span>ƒêi·ªÉm trung b√¨nh</span><strong>${x.avg}</strong></div><div class="d-flex justify-content-between"><span>Chuy√™n c·∫ßn</span><strong>${x.attRate}%</strong></div><div class="mt-3 small text-muted">G·ª£i √Ω: R√† so√°t b√†i c≈©, tham gia ƒë·ªß bu·ªïi, ƒë·ªÅ ngh·ªã ph·ª• ƒë·∫°o n·∫øu c·∫ßn.</div></div></div>`; }).join('') : `<div class="col-12"><div class="glass p-4 text-center">Kh√¥ng c√≥ c·∫£nh b√°o theo ng∆∞·ª°ng ƒë√£ ch·ªçn üéâ</div></div>`; }

    function route(){ const v = (location.hash.replace('#','') || 'home'); showView(v); if(v==='home') renderHome(); if(v==='charts') buildCharts(); if(v==='details') renderDetails(); if(v==='alerts') renderAlerts(); }
    window.addEventListener('hashchange', route);

    async function loadData(){ try{ const res = await fetch('data.json', { cache: 'no-store' }); if(!res.ok) throw new Error('Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c data.json'); state.data = await res.json(); }catch(err){ console.warn('L·ªói t·∫£i data.json, d√πng d·ªØ li·ªáu m·∫´u.', err); state.data = { cls:{ code:'PY-HKICO-001', schedule:'19:00‚Äì21:00 T3 & T6', link:'#', teacher:'Th·∫ßy A' }, students:[ {id:'S1', name:'Nguy·ªÖn An'}, {id:'S2', name:'Tr·∫ßn B√¨nh'} ], modules: Array.from({length:5},(_,mi)=>({ id:'M'+(mi+1), name:'H·ªçc ph·∫ßn '+(mi+1), sessions: Array.from({length:12},(_,si)=>({ date:new Date(Date.now()-(12-si)*86400000*3).toISOString(), topic:'Ch·ªß ƒë·ªÅ '+(si+1), attendance:{ S1:Math.random()>0.1, S2:Math.random()>0.15 }, scores:{ S1:+(6+Math.random()*4).toFixed(1), S2:+(5.5+Math.random()*4.5).toFixed(1) }, remarks:{ S1:'Ti·∫øn b·ªô t·ªët, l√†m b√†i ·ªïn ƒë·ªãnh.', S2:'C·∫ßn luy·ªán th√™m ph·∫ßn v√≤ng l·∫∑p.' }, attachments: (si%2===0)? { S1:[{name:`B√†i l√†m S1 - bu·ªïi ${si+1}.pdf`, url:`BaiKiemTra/S1_buoi${si+1}.pdf`}], S2:[{name:`B√†i l√†m S2 - bu·ªïi ${si+1}.pdf`, url:`BaiKiemTra/S2_buoi${si+1}.pdf`}] } : [ {name:`ƒê·ªÅ bu·ªïi ${si+1}.pdf`, url:`BaiKiemTra/De_buoi${si+1}.pdf`}, {studentId:'S1', name:`B√†i S1 bu·ªïi ${si+1}.pdf`, url:`BaiKiemTra/S1_buoi${si+1}.pdf`} ] })) })) }; } route(); }
    loadData();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
